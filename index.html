<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <script src="https://unpkg.com/knockout@3.5.1/build/output/knockout-latest.js"></script>
  <script src="https://unpkg.com/survey-knockout@1.9.96/survey.ko.min.js"></script>
  <link
    href="https://unpkg.com/survey-core@1.9.96/modern.min.css"
    type="text/css"
    rel="stylesheet"
  />
  <style>
    html, body {
      height: 100%;
      width: 100%;
      margin: 0;
      overflow: hidden;
    }

    .profiler-results {
      display: none;
    }

    .assessment-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
    }

    #surveyContainer {
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      min-width: 330px;
    }

    .toolbar {
      display: flex;
      justify-content: flex-end;
      flex-shrink: 0;
      flex-direction: row;
    }

    .toolbar:empty {
      display: none;
    }

    .toolbar.bottom-toolbar {
      padding: 10px 0;
    }

    .toolbar .toolbar-button {
      -webkit-box-align: center;
      align-items: center;
      border-radius: 0.25rem;
      --tw-text-opacity: 1;
      color: rgba(67, 56, 202, var(--tw-text-opacity));
      --tw-bg-opacity: 1;
      background-color: rgba(224, 231, 255, var(--tw-bg-opacity));
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
      line-height: 1rem;
      font-weight: 500;
      margin: 5px;
      border: none !important;
    }

    .toolbar .toolbar-button:hover {
      background-color: rgba(199, 210, 254, var(--tw-bg-opacity));
    }

    .toolbar .toolbar-button:disabled {
      background-color: rgba(224, 231, 255, var(--tw-bg-opacity));
      color: rgba(80, 80, 80, var(--tw-text-opacity));
    }

    .disabled-nav-button input {
      background-color: rgba(80, 80, 80, 0.5) !important;
      cursor: default;
    }

    .sv-tagbox.sv-tagbox--empty .question-hint,
    .sv-tagbox.sv-tagbox--empty .sv-tagbox__filter-string-input {
      width: 100%;
    }

    .sv-tagbox__item {
      height: auto;
    }

    .sv-tagbox__value.sv-dropdown__value {
      overflow-y: auto;
    }

    .sv-tagbox.sv-tagbox .question-hint-suffix,
    .sv-dropdown__filter-string-input {
      height: 100% !important;
      --tw-ring-color: transparent !important;
    }

  </style>
</head>
<body>
  <p>Test chat page</p>

  <div class="assessment-container">
      <div class="toolbar top-toolbar"></div>
      <div id="surveyContainer">
        <div id="surveyContent"></div>
      </div>
      <div class="toolbar bottom-toolbar"></div>
    </div>
    <script type="text/javascript">
      (function () {
        var field = {
    "command": "submit",
    "location": "messenger",
    "action": {
        "type": "submit"
    },
    "values": {
        "show_save_btn": false,
        "sender_id": 2,
        "template": {
            "id": 3,
            "title": "Intake",
            "active": true,
            "prompt_for_password": false,
            "created_at": "2023-09-13T20:22:50.102Z",
            "updated_at": "2023-09-13T20:22:50.102Z",
            "version": 11,
            "content": {
                "pages": [
                    {
                        "name": "page1",
                        "elements": [
                            {
                                "name": "phone_number",
                                "type": "text",
                                "title": {
                                    "fr": "Si notre connexion est perdue, y a-t-il un numéro de téléphone où nous pouvons vous joindre en toute sécurité?",
                                    "default": "If our connection is lost, is there a phone number we can safely reach you at?"
                                },
                                "inputType": "tel",
                                "validators": [
                                    {
                                        "text": {
                                            "fr": "Veuillez entrer un numéro de téléphone valide",
                                            "default": "Please enter a valid phone number"
                                        },
                                        "type": "regex",
                                        "regex": "^(\\+\\d{1,2}\\s?)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$"
                                    }
                                ],
                                "placeholder": "(###) ###-####",
                                "autocomplete": "tel"
                            },
                            {
                                "name": "name",
                                "type": "text",
                                "title": {
                                    "fr": "Quel est votre nom ou prénom préféré?",
                                    "default": "What is your name or preferred name?"
                                },
                                "isRequired": true
                            },
                            {
                                "name": "counsler_attributes",
                                "type": "tagbox",
                                "title": {
                                    "fr": "Pour vous, quel est le facteur ou quels sont les deux facteurs les plus importants dans le choix de la personne à qui vous parlerez aujourd'hui?",
                                    "default": "What is most important to you about the person you will speak to today? (Choose up to 2)"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Genre",
                                            "default": "Gender"
                                        },
                                        "value": "Gender"
                                    },
                                    {
                                        "text": {
                                            "fr": "Orientation sexuelle",
                                            "default": "Sexual Orientation"
                                        },
                                        "value": "Sexual Orientation"
                                    },
                                    "Race",
                                    "Religion",
                                    {
                                        "text": {
                                            "fr": "Langue",
                                            "default": "Language"
                                        },
                                        "value": "Language"
                                    },
                                    {
                                        "text": {
                                            "fr": "Emplacement",
                                            "default": "Location"
                                        },
                                        "value": "Location"
                                    },
                                    {
                                        "text": {
                                            "fr": "Capacité ou domaine d'expertise",
                                            "default": "Ability or Area of Expertise"
                                        },
                                        "value": "Ability or Area of Expertise"
                                    }
                                ],
                                "hideNumber": true,
                                "maxSelectedChoices": 2
                            },
                            {
                                "name": "age",
                                "type": "dropdown",
                                "title": {
                                    "fr": "Quel âge as-tu:",
                                    "default": "What is your age:"
                                },
                                "choices": [
                                    "1",
                                    "2",
                                    "3",
                                    "4",
                                    "5",
                                    "6",
                                    "7",
                                    "8",
                                    "9",
                                    "10",
                                    "11",
                                    "12",
                                    "13",
                                    "14",
                                    "15",
                                    "16",
                                    "17",
                                    {
                                        "text": {
                                            "fr": "Adulte dont l'appel concerne un enfant ou un adolescent",
                                            "default": "Adult calling about a child or youth"
                                        },
                                        "value": "Adult calling about a child or youth"
                                    }
                                ]
                            },
                            {
                                "name": "pronouns",
                                "type": "dropdown",
                                "title": {
                                    "fr": "Quels sont les pronoms que vous utilisez?",
                                    "default": "What are your Pronouns?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Il/le/lui",
                                            "default": "He/Him/His"
                                        },
                                        "value": "he"
                                    },
                                    {
                                        "text": {
                                            "fr": "Elle/la",
                                            "default": " She/Her/Hers"
                                        },
                                        "value": "she"
                                    },
                                    {
                                        "text": {
                                            "fr": "Iel",
                                            "default": " They/Them/Theirs"
                                        },
                                        "value": "they"
                                    },
                                    {
                                        "text": {
                                            "fr": "Iel",
                                            "default": " Ze/Zir/Zirs"
                                        },
                                        "value": "ze"
                                    },
                                    {
                                        "text": {
                                            "fr": "N'importe quel",
                                            "default": "Any"
                                        },
                                        "value": "any"
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                },
                                "otherText": {
                                    "fr": "Autres pronoms",
                                    "default": "Other pronoun"
                                },
                                "showOtherItem": true
                            },
                            {
                                "name": "gender_identity",
                                "type": "dropdown",
                                "title": {
                                    "fr": "Quelle est votre identité de genre (ou l’identité de l’enfant ou de l’adolescent recevant le service aujourd’hui)?",
                                    "default": "What is your Gender Identity (or the identity of the child or youth receiving service today)?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Sexe féminin",
                                            "default": "Female"
                                        },
                                        "value": "female"
                                    },
                                    {
                                        "text": {
                                            "fr": "Identité non binaire",
                                            "default": "Gender Non-binary"
                                        },
                                        "value": "gender_non_binary"
                                    },
                                    {
                                        "text": {
                                            "fr": "Sexe masculin",
                                            "default": "Male"
                                        },
                                        "value": "male"
                                    },
                                    {
                                        "text": {
                                            "fr": "Homme transgenre",
                                            "default": "Trans Male"
                                        },
                                        "value": "trans_male"
                                    },
                                    {
                                        "text": {
                                            "fr": "Femme transgenre",
                                            "default": "Trans Female"
                                        },
                                        "value": "trans_female"
                                    },
                                    {
                                        "text": {
                                            "fr": "Trans/ Transgenre",
                                            "default": "Trans/ Transgender"
                                        },
                                        "value": "trans"
                                    },
                                    {
                                        "text": {
                                            "fr": "Ne sais pas",
                                            "default": "Do not know"
                                        },
                                        "value": "do_not_know"
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                },
                                "otherText": {
                                    "fr": "Autre identité de genre",
                                    "default": "Other gender identity"
                                },
                                "showOtherItem": true
                            },
                            {
                                "name": "sexual_orientation",
                                "type": "dropdown",
                                "title": {
                                    "fr": "Quelle est votre orientation sexuelle?",
                                    "default": "What is your Sexual Orientation?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Bisexuel(le)",
                                            "default": "Bisexual"
                                        },
                                        "value": "Bisexual"
                                    },
                                    {
                                        "text": {
                                            "fr": "Homosexuel(le)",
                                            "default": "Gay"
                                        },
                                        "value": "Gay"
                                    },
                                    {
                                        "text": {
                                            "fr": "Hétérosexuel(le)",
                                            "default": "Heterosexual"
                                        },
                                        "value": "Heterosexual"
                                    },
                                    {
                                        "text": {
                                            "fr": "Lesbienne",
                                            "default": "Lesbian"
                                        },
                                        "value": "Lesbian"
                                    },
                                    "Queer",
                                    {
                                        "text": {
                                            "fr": "Bispirituel(le)",
                                            "default": "Two-Spirit"
                                        },
                                        "value": "Two-Spirit"
                                    },
                                    {
                                        "text": {
                                            "fr": "Ne sais pas",
                                            "default": "Do not know"
                                        },
                                        "value": "Do not know"
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                },
                                "otherText": {
                                    "fr": "Autre orientation sexuelle ",
                                    "default": "Another sexual orientation"
                                },
                                "hideNumber": true,
                                "showOtherItem": true
                            },
                            {
                                "name": "self_identify_as_indigenous",
                                "type": "radiogroup",
                                "title": {
                                    "fr": "Êtes-vous autochtone?",
                                    "default": "Are you indigenous?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Oui",
                                            "default": "Yes"
                                        },
                                        "value": "True"
                                    },
                                    {
                                        "text": {
                                            "fr": "Non",
                                            "default": "No"
                                        },
                                        "value": "False"
                                    }
                                ],
                                "hideNumber": true
                            },
                            {
                                "name": "indigenous_group",
                                "type": "dropdown",
                                "title": {
                                    "fr": "À quel groupe autochtone vous identifiez-vous le plus?",
                                    "default": "Which indigenous group do you identify as the most?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Premières Nations",
                                            "default": "First Nations"
                                        },
                                        "value": "first-nations"
                                    },
                                    {
                                        "text": "Métis",
                                        "value": "metis"
                                    },
                                    {
                                        "text": {
                                            "fr": "Inuits",
                                            "default": "Inuit"
                                        },
                                        "value": "inuit"
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                },
                                "visibleIf": "{self_identify_as_indigenous} = 'True'",
                                "hideNumber": true,
                                "showOtherItem": true
                            },
                            {
                                "name": "tribe",
                                "type": "text",
                                "title": {
                                    "fr": "Quelle bande ou communauté?",
                                    "default": "Which Band or Community?"
                                },
                                "visibleIf": "{self_identify_as_indigenous} = 'True' and {indigenous_group} anyof ['first-nations', 'metis', 'inuit']",
                                "hideNumber": true
                            },
                            {
                                "name": "race",
                                "type": "dropdown",
                                "title": {
                                    "fr": "Quelle est votre origine?",
                                    "default": "What is your background?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Originaire d'Asie de l'Est",
                                            "default": "East Asian"
                                        },
                                        "value": "East Asian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Originaire d'Asie de l'Est",
                                            "default": "South Asian"
                                        },
                                        "value": "South Asian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Originaire d'Asie du Sud-Est",
                                            "default": "South East Asian"
                                        },
                                        "value": "South East Asian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Africain noir, Caribéen noir, Nord-Américain noir, membre des Premières Nations, Indo-Caribéen (par exemple, Guyanais d'origine indienne)",
                                            "default": "Black African, Black Caribbean, Black North American, First Nations, Indian-Caribbean (e.g. Guyanese with origins in India)"
                                        },
                                        "value": "Black African, Black Caribbean, Black North American, First Nations, Indian-Caribbean (e.g. Guyanese with origins in India)"
                                    },
                                    {
                                        "text": {
                                            "fr": "Autochtone ou aborigène - non inclus ailleurs",
                                            "default": "Indigenous/Aboriginal - not included elsewhere"
                                        },
                                        "value": "Indigenous/Aboriginal - not included elsewhere"
                                    },
                                    "Inuit",
                                    {
                                        "text": {
                                            "fr": "Latino-Américain"
                                        },
                                        "value": "Latin"
                                    },
                                    {
                                        "text": "Métis",
                                        "value": "Metis"
                                    },
                                    {
                                        "text": {
                                            "fr": "Originaire du Moyen-Orient",
                                            "default": "Middle Eastern"
                                        },
                                        "value": "Middle Eastern"
                                    },
                                    {
                                        "text": {
                                            "fr": "Blanc européen (exemples : Français, Anglais, Italien, Portugais, Russe)",
                                            "default": "White-European (e.g. English, Italian, Portuguese, Russian)"
                                        },
                                        "value": "White-European (e.g. English, Italian, Portuguese, Russian)"
                                    },
                                    {
                                        "text": {
                                            "fr": "Blanc nord-américain (exemples : Canadien, Américain)",
                                            "default": "White-North American (e.g. Canadian, American)"
                                        },
                                        "value": "White-North American (e.g. Canadian, American)"
                                    },
                                    {
                                        "text": {
                                            "fr": "Groupe ethnique mixte au recensement",
                                            "default": "Mixed ethnic census group"
                                        },
                                        "value": "Mixed ethnic census group"
                                    },
                                    {
                                        "text": {
                                            "fr": "Autre origine ethnique non mixte",
                                            "default": "Other ethnic non-mixed (NMO)"
                                        },
                                        "value": "Other ethnic non-mixed (NMO)"
                                    },
                                    {
                                        "text": {
                                            "fr": "Inconnu",
                                            "default": "Unknown"
                                        },
                                        "value": "Unknown"
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                },
                                "otherText": {
                                    "fr": "Autre origine",
                                    "default": "Other background"
                                },
                                "hideNumber": true,
                                "showOtherItem": true
                            },
                            {
                                "name": "language",
                                "type": "dropdown",
                                "title": {
                                    "fr": "Quelle est votre langue préférée?",
                                    "default": "What is your preferred language?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Albanais",
                                            "default": "Albanian"
                                        },
                                        "value": "Albanian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Arabe",
                                            "default": "Arabic"
                                        },
                                        "value": "Arabic"
                                    },
                                    {
                                        "text": {
                                            "fr": "Arménien",
                                            "default": "Armenian"
                                        },
                                        "value": "Armenian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Néo-araméen assyrien",
                                            "default": "Assyrian Neo-Aramaic"
                                        },
                                        "value": "Assyrian Neo-Aramaic"
                                    },
                                    "Bengali",
                                    {
                                        "text": {
                                            "fr": "Cantonais",
                                            "default": "Cantonese"
                                        },
                                        "value": "Cantonese"
                                    },
                                    {
                                        "text": {
                                            "fr": "Chinois sans plus de précisions",
                                            "default": "Chinese, not otherwise specified"
                                        },
                                        "value": "Chinese, not otherwise specified"
                                    },
                                    {
                                        "text": {
                                            "fr": "Créole sans plus de précisions",
                                            "default": "Creole, nor otherwise specified"
                                        },
                                        "value": "Creole, not otherwise specified"
                                    },
                                    {
                                        "text": {
                                            "fr": "Croate",
                                            "default": "Croatian"
                                        },
                                        "value": "Croatian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Néerlandais",
                                            "default": "Dutch"
                                        },
                                        "value": "Dutch"
                                    },
                                    {
                                        "text": {
                                            "fr": "Anglais",
                                            "default": "English"
                                        },
                                        "value": "English"
                                    },
                                    {
                                        "text": {
                                            "fr": "Français",
                                            "default": "French"
                                        },
                                        "value": "French"
                                    },
                                    {
                                        "text": {
                                            "fr": "Allemand",
                                            "default": "German"
                                        },
                                        "value": "German"
                                    },
                                    {
                                        "text": {
                                            "fr": "Grec moderne ",
                                            "default": "Modern Greek"
                                        },
                                        "value": "Modern Greek "
                                    },
                                    {
                                        "text": {
                                            "fr": "Goujrati"
                                        },
                                        "value": "Gujarati"
                                    },
                                    {
                                        "text": {
                                            "fr": "Hébreu",
                                            "default": "Hebrew"
                                        },
                                        "value": "Hebrew"
                                    },
                                    "Hindi",
                                    {
                                        "text": {
                                            "fr": "Hongrois",
                                            "default": "Hungarian"
                                        },
                                        "value": "Hungarian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Italien",
                                            "default": "Italian"
                                        },
                                        "value": "Italian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Japonais",
                                            "default": "Japanese"
                                        },
                                        "value": "Japanese"
                                    },
                                    {
                                        "text": {
                                            "fr": "Coréen",
                                            "default": "Korean"
                                        },
                                        "value": "Korean"
                                    },
                                    {
                                        "text": {
                                            "fr": "Macédonien",
                                            "default": "Macedonian"
                                        },
                                        "value": "Macedonian"
                                    },
                                    "Malayalam",
                                    "Mandarin",
                                    {
                                        "text": {
                                            "fr": "Persan (farsi)",
                                            "default": "Persian (Farsi)"
                                        },
                                        "value": "Persian (Farsi)"
                                    },
                                    {
                                        "text": {
                                            "fr": "Polonais",
                                            "default": "Polish"
                                        },
                                        "value": "Polish"
                                    },
                                    {
                                        "text": {
                                            "fr": "Portugais",
                                            "default": "Portuguese"
                                        },
                                        "value": "Portuguese"
                                    },
                                    {
                                        "text": {
                                            "fr": "Pendjabi",
                                            "default": "Punjabi (Panjabi)"
                                        },
                                        "value": "Punjabi (Panjabi)"
                                    },
                                    {
                                        "text": {
                                            "fr": "Roumain",
                                            "default": "Romanian"
                                        },
                                        "value": "Romanian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Russe",
                                            "default": "Russian"
                                        },
                                        "value": "Russian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Serbe",
                                            "default": "Serbian"
                                        },
                                        "value": "Serbian"
                                    },
                                    "Somali",
                                    {
                                        "text": {
                                            "fr": "Espagnol",
                                            "default": "Spanish"
                                        },
                                        "value": "Spanish"
                                    },
                                    {
                                        "text": {
                                            "fr": "Tagalog (philippin)"
                                        },
                                        "value": "Tagalog (Pilipino, Filipino)"
                                    },
                                    {
                                        "text": {
                                            "fr": "Tamoul",
                                            "default": "Tamil"
                                        },
                                        "value": "Tamil"
                                    },
                                    {
                                        "text": {
                                            "fr": "Télougou",
                                            "default": "Telugu"
                                        },
                                        "value": "Telugu"
                                    },
                                    {
                                        "text": {
                                            "fr": "Turc",
                                            "default": "Turkish"
                                        },
                                        "value": "Turkish"
                                    },
                                    {
                                        "text": {
                                            "fr": "Ukrainien",
                                            "default": "Ukrainian"
                                        },
                                        "value": "Ukrainian"
                                    },
                                    {
                                        "text": {
                                            "fr": "Ourdou",
                                            "default": "Urdu"
                                        },
                                        "value": "Urdu"
                                    },
                                    {
                                        "text": {
                                            "fr": "Vietnamien",
                                            "default": "Vietnamese"
                                        },
                                        "value": "Vietnamese"
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                },
                                "otherText": {
                                    "fr": "Autre langue préférée",
                                    "default": "Other preferred language"
                                },
                                "showOtherItem": true
                            },
                            {
                                "name": "interpreter_required",
                                "type": "radiogroup",
                                "title": {
                                    "fr": "Avez-vous besoin des services d'interprétation?",
                                    "default": "Do you require interpreter services?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Oui",
                                            "default": "Yes"
                                        },
                                        "value": "Yes"
                                    },
                                    {
                                        "text": {
                                            "fr": "Non",
                                            "default": "No"
                                        },
                                        "value": "No"
                                    },
                                    {
                                        "text": {
                                            "fr": "Ne sais pas",
                                            "default": "Do not know"
                                        },
                                        "value": "Do not know"
                                    }
                                ],
                                "visibleIf": "{language} <> 'English' and {language} <> 'French'"
                            },
                            {
                                "name": "spirituality",
                                "type": "dropdown",
                                "title": {
                                    "fr": "Quelle est votre religion ou forme de spiritualité?",
                                    "default": "What is your religion/spirituality?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Athéisme",
                                            "default": "Atheism"
                                        },
                                        "value": "Atheism"
                                    },
                                    {
                                        "text": {
                                            "fr": "Foi bahá'íe",
                                            "default": "Baha'i Faith"
                                        },
                                        "value": "Baha’i Faith"
                                    },
                                    {
                                        "text": {
                                            "fr": "Bouddhisme",
                                            "default": "Buddhist"
                                        },
                                        "value": "Buddhist"
                                    },
                                    {
                                        "text": {
                                            "fr": "Christianisme",
                                            "default": "Christian"
                                        },
                                        "value": "Christian "
                                    },
                                    {
                                        "text": {
                                            "fr": "Christianisme orthodoxe",
                                            "default": "Christian Orthodox"
                                        },
                                        "value": "Christian Orthodox"
                                    },
                                    {
                                        "text": {
                                            "fr": "Confucianisme",
                                            "default": "Confucianism"
                                        },
                                        "value": "Confucianism"
                                    },
                                    {
                                        "text": {
                                            "fr": "Hindouisme",
                                            "default": "Hindu"
                                        },
                                        "value": "Hindu"
                                    },
                                    {
                                        "text": {
                                            "fr": "Spiritualité autochtone",
                                            "default": "Indigenous Spirituality"
                                        },
                                        "value": "Indigenous Spirituality"
                                    },
                                    {
                                        "text": {
                                            "fr": "Jaïnisme",
                                            "default": "Jainism"
                                        },
                                        "value": "Jainism"
                                    },
                                    {
                                        "text": {
                                            "fr": "Témoins de Jéhovah",
                                            "default": "Jehovah's Witnesses"
                                        },
                                        "value": "Jehovah’s Witnesses"
                                    },
                                    {
                                        "text": {
                                            "fr": "Juif(ve)",
                                            "default": "Jewish"
                                        },
                                        "value": "Jewish"
                                    },
                                    {
                                        "text": {
                                            "fr": "Islam",
                                            "default": "Muslim"
                                        },
                                        "value": "Muslim"
                                    },
                                    {
                                        "text": {
                                            "fr": "Sans religion",
                                            "default": "No religion"
                                        },
                                        "value": "No religion "
                                    },
                                    {
                                        "text": {
                                            "fr": "Paganisme",
                                            "default": "Paganism"
                                        },
                                        "value": "Paganism"
                                    },
                                    {
                                        "text": {
                                            "fr": "Protestantisme",
                                            "default": "Protestant"
                                        },
                                        "value": "Protestant"
                                    },
                                    {
                                        "text": {
                                            "fr": "Mouvement rastafari",
                                            "default": "Rastafarian movement"
                                        },
                                        "value": "Rastafarian movement"
                                    },
                                    {
                                        "text": {
                                            "fr": "Catholicisme",
                                            "default": "Roman Catholic"
                                        },
                                        "value": "Roman Catholic"
                                    },
                                    {
                                        "text": {
                                            "fr": "Chamanisme",
                                            "default": "Shamanism"
                                        },
                                        "value": "Shamanism"
                                    },
                                    {
                                        "text": {
                                            "fr": "Sikhisme"
                                        },
                                        "value": "Sikh"
                                    },
                                    {
                                        "text": {
                                            "fr": "Spiritualisme",
                                            "default": "Spiritualist"
                                        },
                                        "value": "Spiritualist"
                                    },
                                    {
                                        "text": {
                                            "fr": "Unitarisme",
                                            "default": "Unitarianism"
                                        },
                                        "value": "Unitarianism"
                                    },
                                    {
                                        "text": {
                                            "fr": "Zoroastrisme",
                                            "default": "Zoroastrianism"
                                        },
                                        "value": "Zoroastrianism"
                                    },
                                    {
                                        "text": {
                                            "fr": "Inconnue",
                                            "default": "Unknown"
                                        },
                                        "value": "Unknown"
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                },
                                "otherText": {
                                    "fr": "Autre religion ou forme de spiritualité",
                                    "default": "Other religion/spirituality"
                                },
                                "hideNumber": true,
                                "showOtherItem": true
                            },
                            {
                                "name": "occupation",
                                "type": "tagbox",
                                "title": {
                                    "fr": "Veuillez sélectionner ce qui vous décrit le mieux. Cochez toutes les réponses qui s'appliquent.",
                                    "default": "Please select what describes you best. Select all that apply."
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Étudiant(e)",
                                            "default": "Student"
                                        },
                                        "value": "student"
                                    },
                                    {
                                        "text": {
                                            "fr": "Employé(e)",
                                            "default": "Employed"
                                        },
                                        "value": "employed"
                                    },
                                    {
                                        "text": {
                                            "fr": "Chômeur ou chômeuse",
                                            "default": "Unemployed"
                                        },
                                        "value": "unemployed"
                                    },
                                    {
                                        "text": {
                                            "fr": "Tuteur ou tutrice",
                                            "default": "Caregiver "
                                        },
                                        "value": "caregiver"
                                    },
                                    {
                                        "text": {
                                            "fr": "Activités de loisirs",
                                            "default": "Leisure Activities"
                                        },
                                        "value": "leisure"
                                    },
                                    {
                                        "text": {
                                            "fr": "Handicap",
                                            "default": "Disability"
                                        },
                                        "value": "disability "
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                },
                                "hideNumber": true,
                                "showOtherItem": true
                            },
                            {
                                "name": "living_situation",
                                "type": "dropdown",
                                "title": {
                                    "fr": "Situation de logement actuelle",
                                    "default": "Current living situation "
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "J'habite seul(e)",
                                            "default": "Living alone"
                                        },
                                        "value": "living_alone"
                                    },
                                    {
                                        "text": {
                                            "fr": "J'habite chez moi avec mes parents ou mes tuteurs",
                                            "default": "At home with parent or caregiver"
                                        },
                                        "value": "at_home"
                                    },
                                    {
                                        "text": {
                                            "fr": "J'habite seul(e) et je suis un parent isolé ou une tutrice ou un tuteur isolé",
                                            "default": "Single parent or caregiver living alone"
                                        },
                                        "value": "single_parent_alone"
                                    },
                                    {
                                        "text": {
                                            "fr": "Je n'ai pas d'adresse de domicile permanente",
                                            "default": "No permanent home address"
                                        },
                                        "value": "no_permanent_address"
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                },
                                "otherText": {
                                    "fr": "Autre situation de logement",
                                    "default": "Other living situation"
                                },
                                "hideNumber": true,
                                "showOtherItem": true
                            },
                            {
                                "max": 20,
                                "min": 0,
                                "name": "num_of_children",
                                "type": "text",
                                "title": {
                                    "fr": "Nombre d’enfants dont vous vous occupez:",
                                    "default": "Number of children you are caring for:"
                                },
                                "inputType": "number",
                                "visibleIf": "{living_situation} = 'single_parent_alone'",
                                "hideNumber": true
                            },
                            {
                                "name": "connect_before",
                                "type": "dropdown",
                                "title": {
                                    "fr": "Avez-vous déjà utilisé Parlons Maintenant, vous-même ou le jeune avec qui vous êtes en contact?",
                                    "default": "Have you or the child or youth you are connecting about used One Stop Talk before?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Oui",
                                            "default": "Yes"
                                        },
                                        "value": "Yes"
                                    },
                                    {
                                        "text": {
                                            "fr": "Non",
                                            "default": "No"
                                        },
                                        "value": "No"
                                    },
                                    {
                                        "text": {
                                            "fr": "Je ne sais pas",
                                            "default": "Don't know"
                                        },
                                        "value": "Don't know"
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                }
                            },
                            {
                                "name": "receiving_mental_health_services",
                                "type": "radiogroup",
                                "title": {
                                    "fr": "Recevez-vous actuellement des services de santé mentale ou le jeune avec qui nous allons travailler en reçoit-il?",
                                    "default": "Are you (or the child/youth who we will be working with) currently receiving ongoing Mental Health services?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Préfère ne pas répondre",
                                            "default": "Prefer not to answer"
                                        },
                                        "value": "none"
                                    },
                                    {
                                        "text": {
                                            "fr": "Oui",
                                            "default": "Yes"
                                        },
                                        "value": "yes"
                                    },
                                    {
                                        "text": {
                                            "fr": "Non",
                                            "default": "No"
                                        },
                                        "value": "no"
                                    }
                                ],
                                "noneText": {
                                    "fr": "Préfère ne pas répondre",
                                    "default": "Prefer not to answer"
                                }
                            },
                            {
                                "name": "visit_reason",
                                "type": "dropdown",
                                "title": {
                                    "fr": "De quoi voulez-vous parler aujourd'hui?",
                                    "default": "What do you want to talk about today?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Sentiments",
                                            "default": "Feelings"
                                        },
                                        "value": "Feelings"
                                    },
                                    {
                                        "text": {
                                            "fr": "Intimidation",
                                            "default": "Bullying"
                                        },
                                        "value": "Bullying"
                                    },
                                    {
                                        "text": {
                                            "fr": "Cyberharcèlement",
                                            "default": "Cyberbullying"
                                        },
                                        "value": "Cyberbullying"
                                    },
                                    {
                                        "text": {
                                            "fr": "Relations",
                                            "default": "Relationships"
                                        },
                                        "value": "Relationships"
                                    },
                                    {
                                        "text": {
                                            "fr": "Automutilation",
                                            "default": "Self-Harm"
                                        },
                                        "value": "Self-Harm"
                                    },
                                    {
                                        "text": {
                                            "fr": "Consommation de substances psychoactives",
                                            "default": "Substance Use"
                                        },
                                        "value": "Substance Use"
                                    }
                                ],
                                "otherText": {
                                    "fr": "Autre (veuillez décrire)",
                                    "default": "Other (please describe)"
                                },
                                "showOtherItem": true
                            },
                            {
                                "name": "hopefulness",
                                "type": "rating",
                                "title": {
                                    "fr": "Quel espoir avez-vous de faire face au problème dont vous voulez discuter aujourd'hui ou de le résoudre ?",
                                    "default": "How hopeful do you feel about coping or solving the issue you want to discuss today?"
                                },
                                "rateValues": [
                                    {
                                        "text": {
                                            "fr": "Je suis désespéré(e)",
                                            "default": "Hopeless"
                                        },
                                        "value": 1
                                    },
                                    {
                                        "text": {
                                            "fr": "J'ai peu d'espoir",
                                            "default": "Little hope"
                                        },
                                        "value": 2
                                    },
                                    {
                                        "text": {
                                            "fr": "Je suis ni optimiste ni pessimiste",
                                            "default": "Neutral"
                                        },
                                        "value": 3
                                    },
                                    {
                                        "text": {
                                            "fr": "J'ai un peu d'espoir",
                                            "default": "Some hope"
                                        },
                                        "value": 4
                                    },
                                    {
                                        "text": {
                                            "fr": "Je suis optimiste",
                                            "default": "Hopeful"
                                        },
                                        "value": 5
                                    }
                                ],
                                "autoGenerate": false,
                                "scaleColorMode": "colored"
                            },
                            {
                                "name": "other_information",
                                "type": "radiogroup",
                                "title": {
                                    "fr": "Y a-t-il quelque chose d'autre que vous aimeriez nous dire avant que nous vous mettions en relation avec un clinicien?",
                                    "default": "Is there anything else you'd like to share before we connect you with a clinician?"
                                },
                                "choices": [
                                    {
                                        "text": {
                                            "fr": "Oui",
                                            "default": "Yes"
                                        },
                                        "value": "Yes"
                                    },
                                    {
                                        "text": {
                                            "fr": "Non",
                                            "default": "No"
                                        },
                                        "value": "No"
                                    }
                                ]
                            },
                            {
                                "name": "other",
                                "type": "comment",
                                "title": {
                                    "fr": "Veuillez décrire ce que vous aimeriez nous dire:",
                                    "default": "Please describe what you'd like to share with us:"
                                },
                                "autoGrow": true,
                                "visibleIf": "{other_information} = 'Yes'",
                                "hideNumber": true
                            }
                        ]
                    }
                ],
                "title": {
                    "fr": "Évaluation d'admission",
                    "default": "Intake Assessment"
                },
                "showTitle": false,
                "logoPosition": "right",
                "showPageTitles": false,
                "autoGrowComment": true,
                "progressBarType": "questions",
                "showCompletedPage": false,
                "goNextPageAutomatic": true,
                "questionsOnPageMode": "questionPerPage",
                "showQuestionNumbers": "off"
            },
            "data_mapping": [],
            "questions_on_page_mode": "single-page"
        },
        "content": {},
        "language": "en",
        "message_key": "PZjXCthNJNffCqMdorTvPmKs",
        "started_at": "2023-09-13T20:23:15.657+00:00"
    }
}
        var themeColor = "#121212";
        var values = field.values;
        var buttons = values.buttons || [];
        var lang = values.language || "en";

        // override the default theme colors
        const defaultThemeColors = Survey
                                    .StylesManager
                                    .ThemeColors.modern;

        defaultThemeColors['$main-color'] = `${themeColor}`;
        defaultThemeColors['$add-button-color'] = `${themeColor}`;
        defaultThemeColors['$primary'] = `${themeColor}`;

        // Add 33 at the end of the hex to add 0.2 opacity ie.RRGGBBAA hex notation
        defaultThemeColors['$answer-background-color'] = `${themeColor}33`;
        defaultThemeColors['$primary-light'] = `${themeColor}33`;

        const customCss = {
          "question": {
            "hint": "question-hint",
            "hintSuffixWrapper": "question-hint-suffix"
          }
        };

        // initialize survey
        Survey.StylesManager.applyTheme('modern');
        var survey = new Survey.Model(values.template.content);

        // load values
        survey.data = values.content;
        survey.locale = lang;
        survey.css = customCss;

        if (values.readonly) {
          survey.mode = 'display';
        } else {
          survey.onComplete.add(() => sendMessage(survey.data, 'submit'));

          // add aditional nav buttons
          buttons.forEach(function (button, index) {
            if (button.location) {
              return;
            }

            var btn = createNavigationButton('button ' + index, button, function () {
              sendMessage(survey.data, button.command);
            });
            survey.addNavigationItem(btn);
          });
        }

        // add toolbar buttons
        buttons.forEach(function (button, index) {
          if (!button.location) {
            return;
          } 

          var btn = createToolbarButton('button ' + index, button, function () {
            sendMessage(survey.data, button.command);
          });
          addToolbarButton(btn, button.location);
        });

        function sendMessage(content, command) {
          window.parent.postMessage(
            {
              chaskiqMessage: true,
              type: 'Assessments',
              field: Object.assign({}, field, {
                command: command,
                values: Object.assign({}, field.values, { content: content }),
              }),
            },
            '*'
          );
        }

        function createToolbarButton(id, button, handler) {
          var btn = document.createElement('button');
          btn.id = id;
          btn.className = 'transition duration-150 ease-in-out toolbar-button';
          btn.addEventListener('click', handler);
          btn.innerText = button.title;
          btn.disabled = typeof button.enabled === 'undefined' ? false : !button.enabled;
          return btn;
        }

        function createNavigationButton(id, button, handler) {
          var enabled = typeof button.enabled === 'undefined' ? true : button.enabled;
          var btn = {
            id: id,
            title: button.title,
            action: enabled ? handler : undefined,
            css: enabled ? undefined : 'disabled-nav-button',
          };
          return btn;
        }

        function addToolbarButton(btn, location) {
          document.querySelector(`.${location}`).appendChild(btn);
        }

        survey.render("surveyContent");
      })();
    </script>


  
      <!-- sbx digital front door chat integration -->
<!--   <script>
        (function(d,t) {
          var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
          g.src="https://app.ca.one-stop-talk.sbx.gcp.trchq.com/embed.js"
          s.parentNode.insertBefore(g,s);
          g.onload=function(){
            new window.VirtualCareMessengerEncrypted({
//               domain: 'https://test.ca.one-stop-talk.sbx.gcp.trchq.com',
//               ws:  'wss://test.ca.one-stop-talk.sbx.gcp.trchq.com/cable',
//               app_id: "XnA6d2mEejaov78UETAzM5uj",
              domain: 'https://app.ca.one-stop-talk.sbx.gcp.trchq.com',
              ws:  'wss://app.ca.one-stop-talk.sbx.gcp.trchq.com/cable',
              app_id: "A65a4LPG6rXHg7rz7EdBjxNg",
              lang: "en",
              mode: "fullscreen"
            })
          }
        })(document,"script");
      </script> -->
  
      <!-- staging chat integration -->
<!--       <script>
        (function(d,t) {
          var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
          g.src="https://test.ca.digital-front-door.stg.gcp.trchq.com/embed.js"
          s.parentNode.insertBefore(g,s);
          g.onload=function(){
            new window.VirtualCareMessengerEncrypted({
              domain: 'https://test.ca.digital-front-door.stg.gcp.trchq.com',
              ws:  'wss://test.ca.digital-front-door.stg.gcp.trchq.com/cable',
              app_id: "rxwFha2rt1kkBH64f2JR9MPi",
              lang: "en",
              // mode: "fullscreen"
            })
          }
        })(document,"script");
      </script> -->

      <!--    dev chat integration    -->
<!--       <script>
        (function(d,t) {
          var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
          g.src="https://test.ca.digital-front-door.dev.gcp.trchq.com/embed.js"
          s.parentNode.insertBefore(g,s);
          g.onload=function(){
            new window.VirtualCareMessengerEncrypted({
              domain: 'https://test.ca.digital-front-door.dev.gcp.trchq.com',
              ws:  'wss://test.ca.digital-front-door.dev.gcp.trchq.com/cable',
              app_id: "XhaeaVJPLz73QUMP5LzFrTt9" || "9V6WeTk1QKUigsp1GzGoAzMJ",
              lang: "en",
              // mode: "fullscreen"
            })
          }
        })(document,"script");
      </script> -->
  
      <!-- local chat integration -->
      <script>
        (function (d, t) {
          var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
          g.src = "https://188a-149-248-176-226.ngrok-free.app/embed.js"
          s.parentNode.insertBefore(g, s);
          g.onload=function(){
            new window.VirtualCareMessengerEncrypted({
              domain: 'https://188a-149-248-176-226.ngrok-free.app',
              ws:  'wss://188a-149-248-176-226.ngrok-free.app/cable',
              app_id: "JXK85EBf9JEgJ2YyZbK85QK9",
              lang: "en",
              // mode: "fullscreen"
            })
          }
        })(document, "script");
      </script>

<!--  Menf local      -->
<!--         <script>
        (function (d, t) {
          var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
          g.src = "https://46ad-76-9-211-50.ngrok-free.app/embed.js"
          s.parentNode.insertBefore(g, s);
          g.onload=function(){
            new window.VirtualCareMessengerEncrypted({
              domain: 'https://46ad-76-9-211-50.ngrok-free.app',
              ws:  'wss://46ad-76-9-211-50.ngrok-free.app/cable',
              app_id: "4k8SaB7ehqs2V7AX6E8gav8U", // "JXK85EBf9JEgJ2YyZbK85QK9",
              lang: "en",
              mode: "fullscreen",
              data: {
                "email": "bob@dfd.com",
                "identifier_key": "29de1f5b89080c03ead45ebce69d164e569af3a587770ee0fa05d9be9cfccd06",
                "properties": {
                  "name": "bob"
                }
              }
            })
          }
        })(document, "script");
      </script> -->
  
<!--   <script>
  window['_fs_host'] = 'fullstory.com';
  window['_fs_script'] = 'edge.fullstory.com/s/fs.js';
  window['_fs_org'] = 'o-1KE8B7-na1';
  window['_fs_namespace'] = 'FS';
  (function(m,n,e,t,l,o,g,y){
      if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
      g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s);};g.q=[];
      o=n.createElement(t);o.async=1;o.crossOrigin='anonymous';o.src='https://'+_fs_script;
      y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
      g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g('event',{n:i,p:v},s)};
      g.anonymize=function(){g.identify(!!0)};
      g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
      g.log = function(a,b){g("log",[a,b])};
      g.consent=function(a){g("consent",!arguments.length||a)};
      g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
      g.clearUserCookie=function(){};
      g.setVars=function(n, p){g('setVars',[n,p]);};
      g._w={};y='XMLHttpRequest';g._w[y]=m[y];y='fetch';g._w[y]=m[y];
      if(m[y])m[y]=function(){return g._w[y].apply(this,arguments)};
      g._v="1.3.0";
  })(window,document,window['_fs_namespace'],'script','user');
  </script> -->
</body>
</html>
